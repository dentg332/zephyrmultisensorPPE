<!DOCTYPE html>

<html lang="C" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>System Architecture &#8212; Zephyr Multisensor PPE 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=8a35209d"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Events Module" href="events_module.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="system-architecture">
<h1>System Architecture<a class="headerlink" href="#system-architecture" title="Link to this heading">¶</a></h1>
<p>This section provides a generic overview of the architecture of the system, focusing on the inter-module communication using channels and subscribers.</p>
<section id="design-paradigm">
<h2>Design Paradigm<a class="headerlink" href="#design-paradigm" title="Link to this heading">¶</a></h2>
<p>The system is designed using a <strong>publish-subscribe (pub-sub)</strong> communication model. This pattern facilitates asynchronous and decoupled data exchange between different components (modules) of the system.</p>
</section>
<section id="key-concepts">
<h2>Key Concepts<a class="headerlink" href="#key-concepts" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Channels</strong>:
- Channels act as named message buses through which data packets (messages) are published.
- Each channel is strongly typed, ensuring that only specific types of messages are sent over it.
- Channels hold the latest message state and notify subscribers when new data is available.</p></li>
<li><p><strong>Subscribers</strong>:
- Subscribers are entities that listen to one or more channels.
- They wait for new messages and react accordingly.
- Subscribers can block and wait for data, allowing event-driven processing.
- Multiple subscribers can listen to the same channel independently.</p></li>
</ul>
</section>
<section id="zephyr-zbus-framework">
<h2>Zephyr ZBUS Framework<a class="headerlink" href="#zephyr-zbus-framework" title="Link to this heading">¶</a></h2>
<p>This system leverages the Zephyr Project's <strong>ZBUS</strong> framework for inter-thread communication using channels and subscribers.</p>
<ul>
<li><p><strong>Channel Definition</strong>: Channels are defined using macros, specifying the message type and observers.</p>
<p>Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">ZBUS_CHAN_DEFINE</span><span class="p">(</span><span class="n">payload_chan</span><span class="p">,</span><span class="w">          </span><span class="cm">/* Channel name */</span>
<span class="w">                 </span><span class="k">struct</span><span class="w"> </span><span class="nc">payload_msg</span><span class="p">,</span><span class="w">   </span><span class="cm">/* Message type */</span>
<span class="w">                 </span><span class="nb">NULL</span><span class="p">,</span><span class="w">                 </span><span class="cm">/* Validator */</span>
<span class="w">                 </span><span class="nb">NULL</span><span class="p">,</span><span class="w">                 </span><span class="cm">/* User data */</span>
<span class="w">                 </span><span class="n">ZBUS_OBSERVERS</span><span class="p">(</span><span class="n">lora_sub</span><span class="p">),</span><span class="w"> </span><span class="cm">/* Observers */</span>
<span class="w">                 </span><span class="n">ZBUS_MSG_INIT</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w">      </span><span class="cm">/* Initial value */</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Subscriber Definition</strong>: Subscribers are defined to wait and process data from channels.</p>
<p>Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">ZBUS_SUBSCRIBER_DEFINE</span><span class="p">(</span><span class="n">parser_sub</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
</pre></div>
</div>
<p>Here, <cite>parser_sub</cite> is a subscriber with a queue size of 4.</p>
</li>
</ul>
</section>
<section id="advantages-of-this-architecture">
<h2>Advantages of This Architecture<a class="headerlink" href="#advantages-of-this-architecture" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Loose Coupling</strong>: Modules do not depend directly on each other but communicate via well-defined message types.</p></li>
<li><p><strong>Scalability</strong>: Additional modules can subscribe to existing channels without modifying publishers.</p></li>
<li><p><strong>Concurrency</strong>: Multiple threads safely exchange data with synchronization handled by the framework.</p></li>
<li><p><strong>Maintainability</strong>: Clear separation of concerns improves code clarity and ease of debugging.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>The system architecture harnesses the power of pub-sub via Zephyr's ZBUS framework to enable efficient, modular, and reactive communication between sensors, parsers, and communication modules like LoRaWAN. Channels and subscribers are central to this design, promoting flexibility and robustness in embedded applications.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Zephyr Multisensor PPE</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="events_module.html">Events Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="gps_cb.html">GPS UART Listener</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensor_module.html">Sensors Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="parser_module.html">Parser Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages_file.html">messages.h</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="getting_started.html" title="previous chapter">Getting Started</a></li>
      <li>Next: <a href="events_module.html" title="next chapter">Events Module</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Dennis Tanda Gragasin.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/architecture.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>